<!DOCTYPE html>
<html th:replace="~{layout/baseAdmin :: html}" xmlns:th="http://www.thymeleaf.org">

<div th:fragment="contenido">
  <div class="container-fluid p-4">

    <h1 class="h2 mb-2">Configurar Fuentes</h1>
    <p class="lead text-muted mb-4" th:text="|Colección: ${coleccion.titulo}|">Editando colección...</p>

    <div class="row g-4">

      <div class="col-md-6">
        <div class="card shadow-sm h-100">
          <div class="card-header">
            <h5 class="mb-0">Fuentes Asociadas (Actualmente en la colección)</h5>
          </div>
          <div class="card-body">
            <ul class="list-group list-group-flush">
              <li th:each="fuente : ${fuentesAsociadas}" class="list-group-item d-flex justify-content-between align-items-center">
                <div>
                  <span th:text="${fuente.baseUrl}">URL de la fuente...</span>
                  <span class="badge bg-secondary ms-2" th:text="${fuente.tipoFuente}">TIPO</span>
                </div>
                <form th:action="@{/admin/colecciones/{id}/fuentes/quitar(id=${coleccion.id})}" method="post">
                  <input type="hidden" name="fuenteId" th:value="${fuente.id}" />
                  <button type="submit" class="btn btn-sm btn-outline-danger">Quitar</button>
                </form>
              </li>
              <li th:if="${#lists.isEmpty(fuentesAsociadas)}" class="list-group-item text-muted">
                No hay fuentes asociadas a esta colección.
              </li>
            </ul>
          </div>
        </div>
      </div>

      <div class="col-md-6">
        <div class="card shadow-sm h-100">
          <div class="card-header">
            <h5 class="mb-0">Fuentes Disponibles (Para agregar)</h5>
          </div>
          <div class="card-body">
            <form th:action="@{/admin/colecciones/{id}/fuentes/agregar(id=${coleccion.id})}" method="post" class="d-flex gap-2">
              <select name="fuenteId" class="form-select">
                <option value="" disabled selected>Selecciona una fuente para agregar...</option>
                <option th:each="fuente : ${fuentesDisponibles}"
                        th:value="${fuente.id}"
                        th:text="|${fuente.baseUrl} (${fuente.tipoFuente})|">
                  Fuente disponible...
                </option>
              </select>
              <button type="submit" class="btn btn-success" th:disabled="${#lists.isEmpty(fuentesDisponibles)}">Agregar</button>
            </form>
            <p th:if="${#lists.isEmpty(fuentesDisponibles)}" class="text-muted small mt-2">
              Todas las fuentes disponibles ya están asociadas.
            </p>
          </div>
        </div>
      </div>

    </div> <div class="mt-4">
    <a th:href="@{/admin/colecciones}" class="btn btn-outline-secondary">
      <i class="bi bi-arrow-left me-1"></i> Volver a Colecciones
    </a>
  </div>

  </div> </div>
</html>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet"/>
<link rel="stylesheet" th:href="@{/css/styles.css}">